import{h as F,r as d,f as k,o as w,w as t,b as e,u as o,ac as S,ad as y,ab as b,i as U,_ as O,v as x,a as _,c as A,F as z,ae as B,V as D,t as $,q as E}from"./index-yIIfo-1l.js";import{a as I}from"./avatar-1-VPlJfsFz.js";import{V as K,C as T}from"./VAvatar-C73UamRc.js";import{V as f,a as h,S as P}from"./sweetalert2.esm.all-Cri9UH_p.js";import{V as N,a as V}from"./VCard-DUrcia-s.js";import{V as j}from"./VDivider-Bpz8JJNn.js";import{V as q}from"./VForm-wLrojfDI.js";import{V as g}from"./VTextField-DcnueINI.js";import{V as L,a as M,b as W,c as R}from"./VTabs-Bk_6cWPI.js";import"./_commonjsHelpers-CqkleIqs.js";import"./VImg-D1wMmKMc.js";/* empty css              */import"./VInput-B5cU9eVz.js";import"./index-B3Y5xi2I.js";import"./forwardRefs-D3j0TLhE.js";import"./ssrBoot-DlskbYX7.js";import"./VSlideGroup-D6CdOnT5.js";const Y={__name:"AccountSettingsAccount",setup(C){const l=F(),n=d({}),s=d({}),v=()=>{l.currentRoute.value.path!="/register"&&l.currentRoute.value.path!="/forgotPassword"&&l.currentRoute.value.path!="/login"&&l.currentRoute.value.path!="/twoFactorVerify"&&(console.log("Checking User"),U.get("/api/v1/auth/checkUser",{headers:{"Content-Type":"application/json",Authorization:T.get("Authorization")}}).then(u=>{console.log(u),n.value=u.data,s.value=u.data,n.value.avatarImg=I,s.value.avatarImg=n.avatarImg}).catch(u=>{console.log(u),(u.response&&u.response.status===401||u.response.status===403)&&(console.log("Current Path : "+l.currentRoute.value.fullPath),l.currentRoute.value.path!="/register"&&l.currentRoute.value.path!="/forgotPassword"&&l.currentRoute.value.path!="/login"&&l.currentRoute.value.path!="/twoFactorVerify"&&l.push("/login"))}))};v(),d(),d(!1);const c=()=>{v()},r=()=>{U.put("/api/v1/auth/update",s.value,{headers:{"Content-Type":"application/json",Authorization:T.get("Authorization")}}).then(u=>{console.log(u),P.fire({title:"Update Successful!",text:"Your profile has been updated.",icon:"success",confirmButtonText:"OK"})}).catch(u=>{var i;console.log(u),P.fire({title:"Update Failed!",text:((i=u.response)==null?void 0:i.data)||"Something went wrong. Please try again.",icon:"error",confirmButtonText:"Try Again"})})};return(u,i)=>(w(),k(h,null,{default:t(()=>[e(f,{cols:"12"},{default:t(()=>[e(N,{title:"Account Details"},{default:t(()=>[e(V,{class:"d-flex"},{default:t(()=>[e(K,{rounded:"lg",size:"100",class:"me-6",image:o(I)},null,8,["image"])]),_:1}),e(j),e(V,null,{default:t(()=>[e(q,{class:"mt-6",onSubmit:S(r,["prevent"])},{default:t(()=>[e(h,null,{default:t(()=>[e(f,{md:"6",cols:"12"},{default:t(()=>[e(g,{modelValue:o(s).name,"onUpdate:modelValue":i[0]||(i[0]=p=>o(s).name=p),placeholder:"John Doe",label:"Full Name"},null,8,["modelValue"])]),_:1}),e(f,{md:"6",cols:"12"},{default:t(()=>[e(g,{modelValue:o(s).username,"onUpdate:modelValue":i[1]||(i[1]=p=>o(s).username=p),placeholder:"johndoe",label:"Username"},null,8,["modelValue"])]),_:1}),e(f,{cols:"12",md:"6"},{default:t(()=>[e(g,{modelValue:o(s).email,"onUpdate:modelValue":i[2]||(i[2]=p=>o(s).email=p),label:"E-mail",placeholder:"johndoe@gmail.com",type:"email"},null,8,["modelValue"])]),_:1}),e(f,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:t(()=>[e(y,{type:"submit"},{default:t(()=>i[3]||(i[3]=[b("Save changes")])),_:1}),e(y,{color:"secondary",variant:"tonal",type:"reset",onClick:S(c,["prevent"])},{default:t(()=>i[4]||(i[4]=[b(" Reset ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}},J={__name:"AccountSettingsNotification",setup(C){return d("Only when I'm online"),(l,n)=>(w(),k(N,{title:"Notifications"},{default:t(()=>[e(V,null,{default:t(()=>n[0]||(n[0]=[b(" No new Notifications ")])),_:1}),e(j),e(V)]),_:1}))}},G=O(J,[["__scopeId","data-v-4d314e71"]]),H={class:"d-flex flex-column gap-y-3"},Q={class:"font-weight-medium"},X={__name:"AccountSettingsSecurity",setup(C){F();const l=d(!1),n=d(!1),s=d(!1),v=d(""),c=d(""),r=d(""),u=["Minimum 6 characters long - the more, the better"],i=()=>{U.put("/api/v1/auth/changePassword",{currentPassword:v.value,newPassword:c.value,confirmPassword:r.value},{headers:{"Content-Type":"application/json",Authorization:T.get("Authorization")}}).then(p=>{console.log(p),P.fire({title:"Update Successful!",text:"Your password has been updated.",icon:"success",confirmButtonText:"OK"})}).catch(p=>{var a;console.log(p),P.fire({title:"Update Failed!",text:((a=p.response)==null?void 0:a.data)||"Something went wrong. Please try again.",icon:"error",confirmButtonText:"Try Again"})})};return(p,a)=>(w(),k(h,null,{default:t(()=>[e(f,{cols:"12"},{default:t(()=>[e(N,{title:"Change Password"},{default:t(()=>[e(q,{onSubmit:S(i,["prevent"])},{default:t(()=>[e(V,null,{default:t(()=>[e(h,null,{default:t(()=>[e(f,{cols:"12",md:"6"},{default:t(()=>[e(g,{modelValue:o(v),"onUpdate:modelValue":a[0]||(a[0]=m=>x(v)?v.value=m:null),type:o(l)?"text":"password","append-inner-icon":o(l)?"bx-hide":"bx-show",label:"Current Password",placeholder:"············","onClick:appendInner":a[1]||(a[1]=m=>l.value=!o(l))},null,8,["modelValue","type","append-inner-icon"])]),_:1})]),_:1}),e(h,null,{default:t(()=>[e(f,{cols:"12",md:"6"},{default:t(()=>[e(g,{modelValue:o(c),"onUpdate:modelValue":a[2]||(a[2]=m=>x(c)?c.value=m:null),type:o(n)?"text":"password","append-inner-icon":o(n)?"bx-hide":"bx-show",label:"New Password",autocomplete:"on",placeholder:"············","onClick:appendInner":a[3]||(a[3]=m=>n.value=!o(n))},null,8,["modelValue","type","append-inner-icon"])]),_:1}),e(f,{cols:"12",md:"6"},{default:t(()=>[e(g,{modelValue:o(r),"onUpdate:modelValue":a[4]||(a[4]=m=>x(r)?r.value=m:null),type:o(s)?"text":"password","append-inner-icon":o(s)?"bx-hide":"bx-show",label:"Confirm New Password",placeholder:"············","onClick:appendInner":a[5]||(a[5]=m=>s.value=!o(s))},null,8,["modelValue","type","append-inner-icon"])]),_:1})]),_:1})]),_:1}),e(V,null,{default:t(()=>[a[6]||(a[6]=_("p",{class:"text-base font-weight-medium mt-2"}," Password Requirements: ",-1)),_("ul",H,[(w(),A(z,null,B(u,m=>_("li",{key:m,class:"d-flex"},[_("div",null,[e(D,{size:"7",icon:"bxs-circle",class:"me-3"})]),_("span",Q,$(m),1)])),64))])]),_:1}),e(V,{class:"d-flex flex-wrap gap-4"},{default:t(()=>[e(y,{type:"submit"},{default:t(()=>a[7]||(a[7]=[b("Save changes")])),_:1}),e(y,{type:"reset",color:"secondary",variant:"tonal"},{default:t(()=>a[8]||(a[8]=[b(" Reset ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}},Ve={__name:"account-settings",setup(C){const l=E(),n=d(l.params.tab),s=[{title:"Account",icon:"bx-user",tab:"account"},{title:"Security",icon:"bx-lock-open",tab:"security"},{title:"Notifications",icon:"bx-bell",tab:"notification"}];return(v,c)=>(w(),A("div",null,[e(L,{modelValue:o(n),"onUpdate:modelValue":c[0]||(c[0]=r=>x(n)?n.value=r:null),"show-arrows":"",class:"v-tabs-pill"},{default:t(()=>[(w(),A(z,null,B(s,r=>e(W,{key:r.icon,value:r.tab},{default:t(()=>[e(D,{size:"20",start:"",icon:r.icon},null,8,["icon"]),b(" "+$(r.title),1)]),_:2},1032,["value"])),64))]),_:1},8,["modelValue"]),e(M,{modelValue:o(n),"onUpdate:modelValue":c[1]||(c[1]=r=>x(n)?n.value=r:null),class:"mt-5 disable-tab-transition"},{default:t(()=>[e(R,{value:"account"},{default:t(()=>[e(Y)]),_:1}),e(R,{value:"security"},{default:t(()=>[e(X)]),_:1}),e(R,{value:"notification"},{default:t(()=>[e(G)]),_:1})]),_:1},8,["modelValue"])]))}};export{Ve as default};
