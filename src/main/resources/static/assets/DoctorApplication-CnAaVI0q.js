import{_ as S,f as g,o as p,w as e,b as o,ab as r,a as l,t as d,d as V,ad as C,h,r as T,i as A,c as N,F as j,ae as k}from"./index-yIIfo-1l.js";import{c as B,a as E,V as w,b as O}from"./VCard-DUrcia-s.js";import{V as P}from"./VDivider-Bpz8JJNn.js";import{a as c,V as u,S as b}from"./sweetalert2.esm.all-Cri9UH_p.js";import{a as R,V as z}from"./VChip-CE-nZZsG.js";import{V as $}from"./VSpacer-iQSqJgNF.js";import{C as y}from"./VAvatar-C73UamRc.js";/* empty css                                                                       */import{V as F}from"./VBanner-B28EgzET.js";import"./VImg-D1wMmKMc.js";/* empty css              */import"./index-B3Y5xi2I.js";import"./VSlideGroup-D6CdOnT5.js";import"./_commonjsHelpers-CqkleIqs.js";const I={class:"text-body-1"},L={class:"text-body-1"},G={class:"text-body-1"},K={class:"text-body-1"},q={class:"text-body-1"},J={class:"text-body-1"},U={class:"text-body-1"},H={__name:"DoctorApplicationCard",props:{application:{type:Object,required:!0}},emits:["approve","reject"],setup(n,{emit:m}){const v=i=>new Date(i).toLocaleString(),x=i=>{switch(i){case"PENDING":return"orange";case"APPROVED":return"green";case"REJECTED":return"red";default:return"gray"}},f=m,s=i=>{f("approve",i)},a=i=>{f("reject",i)};return(i,t)=>(p(),g(w,{class:"mx-auto my-4","max-width":"800",elevation:"3"},{default:e(()=>[o(B,{class:"text-h6 font-weight-bold primary white--text"},{default:e(()=>t[2]||(t[2]=[r(" Doctor Application ")])),_:1}),o(P),o(E,null,{default:e(()=>[o(c,{class:"mb-3"},{default:e(()=>[o(u,{cols:"12"},{default:e(()=>[t[7]||(t[7]=l("div",{class:"text-subtitle-1 font-weight-bold"},"Applicant:",-1)),o(w,{outlined:"",class:"pa-3"},{default:e(()=>[l("div",I,[t[3]||(t[3]=l("strong",null,"Name:",-1)),r(" "+d(n.application.user.name),1)]),l("div",L,[t[4]||(t[4]=l("strong",null,"Username:",-1)),r(" "+d(n.application.user.username),1)]),l("div",G,[t[5]||(t[5]=l("strong",null,"Email:",-1)),r(" "+d(n.application.user.email),1)]),l("div",K,[t[6]||(t[6]=l("strong",null,"Role:",-1)),r(" "+d(n.application.user.role),1)])]),_:1})]),_:1})]),_:1}),o(c,{class:"mb-3"},{default:e(()=>[o(u,{cols:"12"},{default:e(()=>[t[8]||(t[8]=l("div",{class:"text-subtitle-1 font-weight-bold"},"Cover Letter:",-1)),l("div",q,d(n.application.coverLetter),1)]),_:1})]),_:1}),o(c,{class:"mb-3"},{default:e(()=>[o(u,{cols:"12"},{default:e(()=>[t[9]||(t[9]=l("div",{class:"text-subtitle-1 font-weight-bold"},"Application Status:",-1)),o(R,{color:x(n.application.applicationStatus),dark:""},{default:e(()=>[r(d(n.application.applicationStatus),1)]),_:1},8,["color"])]),_:1})]),_:1}),o(c,{class:"mb-3"},{default:e(()=>[o(u,{cols:"12",sm:"6"},{default:e(()=>[t[10]||(t[10]=l("div",{class:"text-subtitle-1 font-weight-bold"},"Applied On:",-1)),l("div",J,d(v(n.application.createdOn)),1)]),_:1}),n.application.doneOn!=null?(p(),g(u,{key:0,cols:"12",sm:"6"},{default:e(()=>[t[11]||(t[11]=l("div",{class:"text-subtitle-1 font-weight-bold"},"Done On:",-1)),l("div",U,d(v(n.application.doneOn)),1)]),_:1})):V("",!0)]),_:1})]),_:1}),o(O,null,{default:e(()=>[o($),o(C,{color:"error",disabled:n.application.applicationStatus!=="PENDING",onClick:t[0]||(t[0]=D=>a(n.application.uid))},{default:e(()=>t[12]||(t[12]=[r(" Reject ")])),_:1},8,["disabled"]),o(C,{color:"primary",variant:"outlined",disabled:n.application.applicationStatus!=="PENDING",onClick:t[1]||(t[1]=D=>s(n.application.uid))},{default:e(()=>t[13]||(t[13]=[r(" Approve ")])),_:1},8,["disabled"])]),_:1})]),_:1}))}},M=S(H,[["__scopeId","data-v-8d45088b"]]),rt={__name:"DoctorApplication",setup(n){h();const m=T([]),v=s=>{A.post(`/api/v1/applications/approveApplication/${s}`,{},{headers:{"Content-Type":"application/json",Authorization:y.get("Authorization")}}).then(a=>{console.log(a),b.fire({title:"Success",text:a.data,icon:"success",confirmButtonText:"OK"}),f()}).catch(a=>{var i;console.log(a),b.fire({title:"Failed!",text:((i=a.response)==null?void 0:i.data)||"Something went wrong. Please try again.",icon:"error",confirmButtonText:"Try Again"})})},x=s=>{A.post(`/api/v1/applications/reject/${s}`,{},{headers:{"Content-Type":"application/json",Authorization:y.get("Authorization")}}).then(a=>{console.log(a),b.fire({title:"Success",text:a.data,icon:"success",confirmButtonText:"OK"}),f()}).catch(a=>{var i;console.log(a),b.fire({title:"Failed!",text:((i=a.response)==null?void 0:i.data)||"Something went wrong. Please try again.",icon:"error",confirmButtonText:"Try Again"})})},f=()=>{A.get("/api/v1/applications/listDoctorApplications",{headers:{"Content-Type":"application/json",Authorization:y.get("Authorization")}}).then(s=>{console.log(s),m.value=s.data})};return f(),(s,a)=>(p(),g(z,null,{default:e(()=>[o(c,null,{default:e(()=>[o(u,{cols:"12"},{default:e(()=>a[0]||(a[0]=[l("h1",{class:"text-h4 font-weight-bold mb-6"},"Doctor Applications",-1)])),_:1})]),_:1}),m.value.length==0?(p(),g(c,{key:0},{default:e(()=>[o(F,null,{default:e(()=>a[1]||(a[1]=[r(" No Pending Applications ")])),_:1})]),_:1})):V("",!0),m.value.length>0?(p(),g(c,{key:1},{default:e(()=>[(p(!0),N(j,null,k(m.value,i=>(p(),g(u,{key:i.uid,cols:"12"},{default:e(()=>[o(M,{application:i,onApprove:v,onReject:x},null,8,["application"])]),_:2},1024))),128))]),_:1})):V("",!0)]),_:1}))}};export{rt as default};
