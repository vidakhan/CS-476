import{h as x,r as l,f as A,o as w,w as a,i as c,b as e,ab as u,ac as R,v as _,u as y,ad as f}from"./index-yIIfo-1l.js";import{a as C}from"./avatar-1-VPlJfsFz.js";import{C as d}from"./VAvatar-C73UamRc.js";import{a as m,V as i,S as v}from"./sweetalert2.esm.all-Cri9UH_p.js";import{V as b,a as g}from"./VCard-DUrcia-s.js";import{V as T,a as S}from"./VBanner-B28EgzET.js";import{V as B}from"./VDivider-Bpz8JJNn.js";import{V as D}from"./VForm-wLrojfDI.js";import{V as k}from"./VTextarea-Cr0mdQHO.js";import"./_commonjsHelpers-CqkleIqs.js";import"./VImg-D1wMmKMc.js";/* empty css              */import"./VInput-B5cU9eVz.js";import"./index-B3Y5xi2I.js";import"./forwardRefs-D3j0TLhE.js";const Q={__name:"DoctorApplications",setup(z){const o=x(),n=l({}),p=l({});(()=>{o.currentRoute.value.path!="/register"&&o.currentRoute.value.path!="/forgotPassword"&&o.currentRoute.value.path!="/login"&&o.currentRoute.value.path!="/twoFactorVerify"&&(console.log("Checking User"),c.get("/api/v1/auth/checkUser",{headers:{"Content-Type":"application/json",Authorization:d.get("Authorization")}}).then(t=>{console.log(t),n.value=t.data,p.value=t.data,n.value.avatarImg=C,p.value.avatarImg=n.avatarImg}).catch(t=>{console.log(t),(t.response&&t.response.status===401||t.response.status===403)&&(console.log("Current Path : "+o.currentRoute.value.fullPath),o.currentRoute.value.path!="/register"&&o.currentRoute.value.path!="/forgotPassword"&&o.currentRoute.value.path!="/login"&&o.currentRoute.value.path!="/twoFactorVerify"&&o.push("/login"))}))})(),l(),l(!1);const s=l(null),h=()=>{c.post("/api/v1/auth/applyAsDoctor",{coverLetter:s.value},{headers:{"Content-Type":"application/json",Authorization:d.get("Authorization")}}).then(t=>{console.log(t),v.fire({title:"Sent Successful!",text:"Application Sent successfully. Wait for Approval",icon:"success",confirmButtonText:"OK"}),o.push("/dashboard")}).catch(t=>{var r;console.log(t),v.fire({title:"Application Failed!",text:((r=t.response)==null?void 0:r.data)||"Something went wrong. Please try again.",icon:"error",confirmButtonText:"Try Again"})})};return(t,r)=>(w(),A(m,null,{default:a(()=>[e(i,{cols:"12"},{default:a(()=>[e(b,{title:"Account Details"},{default:a(()=>[e(g,{class:"d-flex"},{default:a(()=>[e(T,null,{default:a(()=>[e(S,null,{default:a(()=>r[1]||(r[1]=[u(" Apply To be A Doctor to be able to diagonize peoples diseases ")])),_:1})]),_:1})]),_:1}),e(B),e(g,null,{default:a(()=>[e(D,{class:"mt-6",onSubmit:R(h,["prevent"])},{default:a(()=>[e(m,null,{default:a(()=>[e(i,{md:"12",cols:"12"},{default:a(()=>[e(k,{label:"Cover Letter",placeholder:"Cover Letter",modelValue:y(s),"onUpdate:modelValue":r[0]||(r[0]=V=>_(s)?s.value=V:null),"auto-grow":""},null,8,["modelValue"])]),_:1}),e(i,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:a(()=>[e(f,{type:"submit"},{default:a(()=>r[2]||(r[2]=[u("Submit Application")])),_:1}),e(f,{color:"secondary",variant:"tonal",type:"reset"},{default:a(()=>r[3]||(r[3]=[u(" Reset ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}};export{Q as default};
