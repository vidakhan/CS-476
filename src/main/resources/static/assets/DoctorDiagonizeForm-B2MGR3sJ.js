import{h as N,r as f,f as c,o as d,w as e,i as w,b as o,d as p,u as a,ab as m,a as s,t as n,c as h,F as M,ae as L,ac as U,ad as F}from"./index-yIIfo-1l.js";import{a as E}from"./avatar-1-VPlJfsFz.js";import{C as D}from"./VAvatar-C73UamRc.js";import{a as g,V as r,S as z}from"./sweetalert2.esm.all-Cri9UH_p.js";/* empty css                                                                       */import{V as O,a as j}from"./VBanner-B28EgzET.js";import{V as v,c as q,a as S,d as G}from"./VCard-DUrcia-s.js";import{V as B}from"./VDivider-Bpz8JJNn.js";import{V as $}from"./VForm-wLrojfDI.js";import{V as P}from"./VTextarea-Cr0mdQHO.js";import{V as H}from"./VSpacer-iQSqJgNF.js";import"./_commonjsHelpers-CqkleIqs.js";import"./VImg-D1wMmKMc.js";/* empty css              */import"./VInput-B5cU9eVz.js";import"./index-B3Y5xi2I.js";import"./forwardRefs-D3j0TLhE.js";const J={class:"text-body-1"},K={class:"text-body-1"},Q={class:"text-body-1"},W={key:0},X={class:"text-body-1"},Y={class:"text-body-1"},Z={class:"text-body-1"},tt={class:"text-body-1"},et={class:"text-body-1"},st={class:"text-body-1"},ot={class:"text-body-1"},at={class:"text-body-1"},lt={class:"text-body-1"},it={class:"text-body-1"},nt={class:"text-body-1"},Ct={__name:"DoctorDiagonizeForm",setup(dt){const u=N(),_=f({}),k=f({});(()=>{u.currentRoute.value.path!="/register"&&u.currentRoute.value.path!="/forgotPassword"&&u.currentRoute.value.path!="/login"&&u.currentRoute.value.path!="/twoFactorVerify"&&(console.log("Checking User"),w.get("/api/v1/auth/checkUser",{headers:{"Content-Type":"application/json",Authorization:D.get("Authorization")}}).then(i=>{console.log(i),_.value=i.data,k.value=i.data,_.value.avatarImg=E,k.value.avatarImg=_.avatarImg}).catch(i=>{console.log(i),(i.response&&i.response.status===401||i.response.status===403)&&(console.log("Current Path : "+u.currentRoute.value.fullPath),u.currentRoute.value.path!="/register"&&u.currentRoute.value.path!="/forgotPassword"&&u.currentRoute.value.path!="/login"&&u.currentRoute.value.path!="/twoFactorVerify"&&u.push("/login"))}))})(),f(),f(!1);const T=f([]),A=async()=>{try{const i=await w.get("/api/v1/diagnosis/symptomsList",{headers:{"Content-Type":"application/json",Authorization:D.get("Authorization")}});return console.log("Symptoms List:",i.data),i.data}catch(i){console.error("Error fetching symptoms list:",i)}};T.value=A(),f(null);const x=f(!1),V=f(!1),l=f(null),R=i=>new Date(i).toLocaleString();f(null);const y=f({diagnosisId:"",findings:"",medication:""}),C=()=>{console.log(u.currentRoute.value.query.id),w.get(`/api/v1/diagnosis/view/${u.currentRoute.value.query.id}`,{headers:{"Content-Type":"application/json",Authorization:D.get("Authorization")}}).then(i=>{console.log(i),l.value=i.data,y.value.diagnosisId=l.value.uid})};C();const I=()=>{x.value="true",w.post("/api/v1/diagnosis/medicate",y.value,{headers:{"Content-Type":"application/json",Authorization:D.get("Authorization")}}).then(i=>{z.fire({icon:"success",title:"Success",text:"Diagnosis submitted successfully!"}),V.value=!0,x.value=!1,C()}).catch(i=>{var t;console.log(i),z.fire({icon:"error",title:"Error",text:((t=i.response)==null?void 0:t.data)||"An error occurred!"}),V.value=!1,x.value=!1})};return(i,t)=>(d(),c(g,null,{default:e(()=>[o(r,{cols:"12"},{default:e(()=>[o(O,null,{default:e(()=>[a(V)?(d(),c(j,{key:0},{default:e(()=>t[2]||(t[2]=[m(" Request sent successfully. wait for a doctor to respond . ")])),_:1})):p("",!0)]),_:1}),a(l)!=null?(d(),c(v,{key:0,class:"mx-auto","max-width":"800",elevation:"5"},{default:e(()=>[o(q,{class:"text-h5 font-weight-bold primary white--text"},{default:e(()=>t[3]||(t[3]=[m(" Medical Diagnosis Details ")])),_:1}),o(B),o(S,null,{default:e(()=>[o(g,{class:"mb-3"},{default:e(()=>[o(r,{cols:"12",sm:"6"},{default:e(()=>[t[4]||(t[4]=s("div",{class:"text-subtitle-1 font-weight-bold"},"Diagnosis Type:",-1)),s("div",J,n(a(l).diagnosisType),1)]),_:1}),a(l).probabilityPercentage!=null&&a(l).probabilityPercentage>0?(d(),c(r,{key:0,cols:"12",sm:"6"},{default:e(()=>[t[5]||(t[5]=s("div",{class:"text-subtitle-1 font-weight-bold"},"Probability Percentage:",-1)),s("div",K,n(a(l).probabilityPercentage)+"%",1)]),_:1})):p("",!0),o(r,{cols:"12",sm:"6"},{default:e(()=>[t[7]||(t[7]=s("div",{class:"text-subtitle-1 font-weight-bold"},"diagnosis Status:",-1)),s("div",Q,[m(n(a(l).diagnosisStatus)+" ( ",1),a(l).diagnosisStatus=="PENDING"?(d(),h("i",W,"waiting for a doctor to respond")):p("",!0),t[6]||(t[6]=m(" )"))])]),_:1})]),_:1}),a(l).description!=null?(d(),c(g,{key:0,class:"mb-3"},{default:e(()=>[o(r,{cols:"12"},{default:e(()=>[t[8]||(t[8]=s("div",{class:"text-subtitle-1 font-weight-bold"},"Description:",-1)),o(v,{outlined:"",class:"pa-3"},{default:e(()=>[s("div",X,[s("strong",null,n(a(l).description),1)])]),_:1})]),_:1})]),_:1})):p("",!0),o(g,{class:"mb-3"},{default:e(()=>[o(r,{cols:"12"},{default:e(()=>[t[9]||(t[9]=s("div",{class:"text-subtitle-1 font-weight-bold"},"Symptoms:",-1)),o(v,{outlined:"",class:"pa-3"},{default:e(()=>[(d(!0),h(M,null,L(a(l).diseaseSymptom,b=>(d(),h("div",{class:"text-body-1",key:b},[s("strong",null,n(b.symptom.name),1),m(" : "+n(b.severity),1)]))),128))]),_:1})]),_:1})]),_:1}),a(l).disease!=null?(d(),c(g,{key:1,class:"mb-3"},{default:e(()=>[o(r,{cols:"12"},{default:e(()=>[t[11]||(t[11]=s("div",{class:"text-subtitle-1 font-weight-bold"},"Disease:",-1)),o(v,{outlined:"",class:"pa-3"},{default:e(()=>[s("div",Y,[t[10]||(t[10]=s("strong",null,"Name:",-1)),m(" "+n(a(l).disease.name),1)])]),_:1})]),_:1})]),_:1})):p("",!0),a(l).diagnosisDescription!=null?(d(),c(g,{key:2,class:"mb-3"},{default:e(()=>[o(r,{cols:"12"},{default:e(()=>[t[12]||(t[12]=s("div",{class:"text-subtitle-1 font-weight-bold"},"Diagnosis Description:",-1)),s("div",Z,n(a(l).diagnosisDescription),1)]),_:1})]),_:1})):p("",!0),a(l).recommendedMedication!=null?(d(),c(g,{key:3,class:"mb-3"},{default:e(()=>[o(r,{cols:"12"},{default:e(()=>[t[13]||(t[13]=s("div",{class:"text-subtitle-1 font-weight-bold"},"Recommended Medication:",-1)),s("div",tt,n(a(l).recommendedMedication),1)]),_:1})]),_:1})):p("",!0),o(g,{class:"mb-3"},{default:e(()=>[o(r,{cols:"12"},{default:e(()=>[t[15]||(t[15]=s("div",{class:"text-subtitle-1 font-weight-bold"},"Patient:",-1)),o(v,{outlined:"",class:"pa-3"},{default:e(()=>[s("div",et,[t[14]||(t[14]=s("strong",null,"Name:",-1)),m(" "+n(a(l).user.name),1)])]),_:1})]),_:1})]),_:1}),a(l).diagonalizedBy!=null?(d(),c(g,{key:4,class:"mb-3"},{default:e(()=>[o(r,{cols:"12"},{default:e(()=>[t[20]||(t[20]=s("div",{class:"text-subtitle-1 font-weight-bold"},"Diagnosed By:",-1)),o(v,{outlined:"",class:"pa-3"},{default:e(()=>[s("div",st,[t[16]||(t[16]=s("strong",null,"Name:",-1)),m(" "+n(a(l).diagonalizedBy.name),1)]),s("div",ot,[t[17]||(t[17]=s("strong",null,"Username:",-1)),m(" "+n(a(l).diagonalizedBy.username),1)]),s("div",at,[t[18]||(t[18]=s("strong",null,"Email:",-1)),m(" "+n(a(l).diagonalizedBy.email),1)]),s("div",lt,[t[19]||(t[19]=s("strong",null,"Role:",-1)),m(" "+n(a(l).diagonalizedBy.role),1)])]),_:1})]),_:1})]),_:1})):p("",!0),o(g,{class:"mb-3"},{default:e(()=>[o(r,{cols:"12",sm:"6"},{default:e(()=>[t[21]||(t[21]=s("div",{class:"text-subtitle-1 font-weight-bold"},"Created On:",-1)),s("div",it,n(R(a(l).createdOn)),1)]),_:1}),a(l).resultsOn!=null?(d(),c(r,{key:0,cols:"12",sm:"6"},{default:e(()=>[t[22]||(t[22]=s("div",{class:"text-subtitle-1 font-weight-bold"},"Results On:",-1)),s("div",nt,n(R(a(l).resultsOn)),1)]),_:1})):p("",!0)]),_:1})]),_:1})]),_:1})):p("",!0)]),_:1}),o(r,null,{default:e(()=>[a(V)?p("",!0):(d(),c(v,{key:0,title:"Doctor Diagonize symptoms"},{default:e(()=>[o($,{onSubmit:U(I,["prevent"])},{default:e(()=>[o(S,null,{default:e(()=>[o(P,{label:"Describe your findings about the disease",placeholder:"Describe your findings about the disease",modelValue:a(y).findings,"onUpdate:modelValue":t[0]||(t[0]=b=>a(y).findings=b)},null,8,["modelValue"]),t[23]||(t[23]=s("br",null,null,-1)),o(H),o(B),o(P,{label:"Medication/prescription",placeholder:"Describe Medication/prescription/how to treat",modelValue:a(y).medication,"onUpdate:modelValue":t[1]||(t[1]=b=>a(y).medication=b)},null,8,["modelValue"])]),_:1}),o(G,null,{default:e(()=>[o(F,{loading:a(x),type:"submit"},{default:e(()=>t[24]||(t[24]=[m("Submit Diagnosis")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1}))]),_:1})]),_:1}))}};export{Ct as default};
